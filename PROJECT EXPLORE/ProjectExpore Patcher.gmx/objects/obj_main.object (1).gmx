<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Initialize

alarm[0]=2;
version_check = "";
old_version = "";
patch_mode = 0;
dl_link = "";
file_get = -9192;
file_size = 0;
file_down = 0;
launch_path = "";

if ( file_exists("patch_data") == false )
{
    var file_id = file_text_open_write("patch_data");
    file_text_write_string(file_id,"unknown");
    file_text_close(file_id);
}
else
{
    var file_id = file_text_open_read("patch_data");
    old_version = file_text_read_string(file_id);file_text_readln(file_id);
    launch_path = file_text_read_string(file_id);
    file_text_close(file_id);
}

http_id1 = http_get("http://www.seabassandgazellestudios.com/patch-page.html");
http_id2 = -99921;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alarm[0]=2;

switch(patch_mode)
{
    case 1:
    {
        if ( old_version == version_check )
        {
            patch_mode = 5;
        }
        else
        {
            patch_mode = 2;
        }
        break;
    }
    case 2:
    {
        if ( http_id2 == -99921 )
        {
        http_id2 = http_get("http://www.seabassandgazellestudios.com/patch-page.html");
        }
        break;
    }
    case 3:
    {
        if ( file_get == -9192 )
        {
        directory_create("game");
        var str = "game/ProjectExplore.zip";
        file_get = http_get_file(dl_link,str);
        }
        break;
    }
    case 4:
    {
        zip_unzip(launch_path,"game/");
        var pos = string_pos(".zip",launch_path);
        launch_path = string_delete(launch_path,pos-1,5);
        launch_path = launch_path + "e.exe";
        var file_id = file_text_open_write("patch_data");
        file_text_write_string(file_id,string(version_check));file_text_writeln(file_id);
        file_text_write_string(file_id,string(launch_path));
        file_text_close(file_id);
        patch_mode = 5;
        break;
    }
    case 5:
    {
        execute_program_ex(launch_path,0,false);
        game_end();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="62">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Get Current Version
if ds_map_find_value(async_load, "id") == http_id1
    {
    if ds_map_find_value(async_load, "status") == 0
       {
       var str = string(ds_map_find_value(async_load, "result"));
       var count = string_length(str);
       var pos = string_pos("Project Explore Version: ",str);
       str = string_delete(str,1,pos+24);
       pos = string_pos("(^3^)",str);
       str = string_delete(str,pos,pos+string_length(str));
       version_check = str;
       http_id1 = -114;
       if ( patch_mode == 0 )
       {
       patch_mode = 1;
       }
       }
    else
       {
       str = "null";
       }
    }
    
// Get patch download link
if ds_map_find_value(async_load, "id") == http_id2
    {
    if ds_map_find_value(async_load, "status") == 0
       {
       var str1 = string(ds_map_find_value(async_load, "result"));
       var count1 = string_length(str1);
       var pos1 = string_pos("Download Link",str1);
       str1 = string_delete(str1,1,pos1+19);
       pos1 = string_pos("(^3^)",str1);
       str1 = string_delete(str1,pos1,pos1+string_length(str1));
       dl_link = str1;
       if ( patch_mode == 2 )
       {
       patch_mode = 3;
       }
       }
    else
       {
       str1 = "null";
       }
    }
    
// Game File Download
if ds_map_find_value(async_load, "id") == file_get
    {
    var status = ds_map_find_value(async_load, "status");
    {
       var path = ds_map_find_value(async_load, "result");
       launch_path = path;
    }
    if status == 0
    {
    patch_mode = 4;
    exit;
    }
    if status &lt; 0
    {
    patch_mode = 6;
    }
    if status == 1
    {
    file_size = ds_map_find_value(async_load, "contentLength");
    file_down = ds_map_find_value(async_load, "sizeDownloaded");
    }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_font(font_gulim_14);
draw_set_color(c_white);
draw_set_halign(fa_center);
draw_set_valign(fa_middle);
draw_text(320,128,"Project Explore");

draw_set_halign(fa_left);

switch(patch_mode)
{
    case 0:
    {
    draw_text(8,466,"Getting game version from server");break;
    }
    case 1:
    {
    draw_text(8,466,"Comparing versions");break;
    }
    case 2:
    {
    draw_text(8,466,"Initializing download");break;
    }
    case 3:
    {
    draw_text(8,466,"Dowloading... ("+string(file_down)+" / "+string(file_size)+")");break;
    }
    case 4:
    {
    draw_text(8,466,"Update complete");break;
    }
    case 5:
    {
    draw_text(8,466,"Launching Game!");break;
    }
    case 6:
    {
    draw_text(8,466,"Error downloading update");break;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
